import{_ as q,g as H,r as x,o as U,aV as X,aW as K,p as v,h as Z,s as o,t as l,u as e,z as j,I as G,v as J,x as n,L as Q,M as I,O as Y,B as D,A as C,V as g,W as M,X as S,Z as y,P as B,a0 as d,a1 as u,aX as c,U as i,ab as P,y as h,K as ee,f as _,e as k,al as w,ap as oe}from"./index-Bp7GJEX9.js";const le={key:0},te={class:"prenotazione-section"},ne={key:0,class:"cliente-section"},ae={class:"actions-section"},ie={class:"actions-section"},se={__name:"AlertInformazioniPrenotazione",props:["isOpen","prenotazioneSelected"],emits:["close-modal","ricarica-orari"],setup(E,{emit:N}){const s=E,b=N,m=H(),r=x(null),f=x(!1);U(()=>{console.log("Modal montato")}),X(()=>{console.log("Modal smontato")});const A=()=>console.log("Modal sta per essere presentato"),O=()=>console.log("Modal è stato presentato"),V=()=>{console.log("Modal sta per essere chiuso"),z()},W=()=>console.log("Modal è stato chiuso");K(()=>{s.prenotazioneSelected&&L()});const L=async()=>{try{f.value=!0;const a=_(m,"Cliente",s.prenotazioneSelected.idDocumentCliente),t=await k(a);t.exists()&&(r.value=t.data())}catch(a){console.error("Errore nel recupero delle informazioni del cliente:",a),r.value=null}finally{f.value=!1}},T=async()=>{try{f.value=!0;const a=_(m,"Prenotazioni",s.prenotazioneSelected.id);await w(a),z(),b("ricarica-orari")}catch(a){console.error("Errore durante l'eliminazione della prenotazione:",a)}finally{f.value=!1}},z=()=>b("close-modal"),R=()=>{window.confirm("Attenzione! Bloccare questo cliente impedirà a questa email di fare prenotazioni in futuro. Sei sicuro di voler procedere?")&&F()},F=async()=>{try{f.value=!0;const a=_(m,"Cliente",s.prenotazioneSelected.idDocumentCliente),t=await k(a);if(t.exists()){const p=t.data();p.bloccato=!0;const $=_(m,"ClientiBloccati",a.id);await oe($,p),await w(a),alert("Cliente bloccato con successo. Non potrà più effettuare prenotazioni.")}}catch(a){console.error("Errore nel bloccare il cliente:",a)}finally{f.value=!1}};return(a,t)=>(v(),Z(e(ee),{"is-open":s.isOpen,onClose:t[2]||(t[2]=p=>z()),"backdrop-dismiss":"true",onIonModalWillPresent:A,onIonModalDidPresent:O,onIonModalWillDismiss:V,onIonModalDidDismiss:W},{default:o(()=>[l(e(j),null,{default:o(()=>[l(e(G),{color:"primary"},{default:o(()=>[l(e(J),null,{default:o(()=>t[3]||(t[3]=[n("Dettagli")])),_:1}),l(e(Q),{slot:"end"},{default:o(()=>[l(e(I),{onClick:t[0]||(t[0]=p=>z())},{default:o(()=>t[4]||(t[4]=[n("Chiudi")])),_:1})]),_:1})]),_:1})]),_:1}),l(e(Y),{class:"ion-padding"},{default:o(()=>[s.prenotazioneSelected||r.value?(v(),D("div",le,[C("section",te,[l(e(g),null,{default:o(()=>[l(e(M),null,{default:o(()=>[l(e(S),{class:"ion-text-center"},{default:o(()=>t[5]||(t[5]=[n("Prenotazione")])),_:1})]),_:1}),l(e(y),null,{default:o(()=>[l(e(B),null,{default:o(()=>[l(e(d),null,{default:o(()=>[l(e(u),{class:"ion-text-bold"},{default:o(()=>t[6]||(t[6]=[n("Servizio:")])),_:1}),l(e(c),null,{default:o(()=>[n(i(s.prenotazioneSelected.servizioSelezionato),1)]),_:1})]),_:1}),l(e(d),null,{default:o(()=>[l(e(u),{class:"ion-text-bold"},{default:o(()=>t[7]||(t[7]=[n("Durata:")])),_:1}),l(e(c),null,{default:o(()=>[n(i(s.prenotazioneSelected.durataServizioSelezionato)+" minuti",1)]),_:1})]),_:1}),l(e(d),null,{default:o(()=>[l(e(u),{class:"ion-text-bold"},{default:o(()=>t[8]||(t[8]=[n("Ora Inizio:")])),_:1}),l(e(c),null,{default:o(()=>[n(i(s.prenotazioneSelected.oraInizio),1)]),_:1})]),_:1}),l(e(d),null,{default:o(()=>[l(e(u),{class:"ion-text-bold"},{default:o(()=>t[9]||(t[9]=[n("Ora Fine:")])),_:1}),l(e(c),null,{default:o(()=>[n(i(s.prenotazioneSelected.oraFine),1)]),_:1})]),_:1}),l(e(d),null,{default:o(()=>[l(e(u),{class:"ion-text-bold"},{default:o(()=>t[10]||(t[10]=[n("Commento:")])),_:1}),l(e(c),null,{default:o(()=>[n(i(s.prenotazioneSelected.commento),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),r.value?(v(),D("section",ne,[l(e(g),null,{default:o(()=>[l(e(M),null,{default:o(()=>[l(e(S),{class:"ion-text-center"},{default:o(()=>t[11]||(t[11]=[n("Cliente")])),_:1})]),_:1}),l(e(y),null,{default:o(()=>[l(e(B),null,{default:o(()=>[l(e(d),null,{default:o(()=>[l(e(u),{class:"ion-text-bold"},{default:o(()=>t[12]||(t[12]=[n("Nome:")])),_:1}),l(e(c),null,{default:o(()=>[n(i(r.value.nome)+" "+i(r.value.cognome),1)]),_:1})]),_:1}),l(e(d),{button:"",href:"tel:{{ cliente.cellulare }}"},{default:o(()=>[l(e(u),{class:"ion-text-bold"},{default:o(()=>t[13]||(t[13]=[n("Cellulare:")])),_:1}),l(e(c),null,{default:o(()=>[n(i(r.value.cellulare),1)]),_:1})]),_:1}),l(e(d),null,{default:o(()=>[l(e(u),{class:"ion-text-bold"},{default:o(()=>t[14]||(t[14]=[n("Email:")])),_:1}),l(e(c),null,{default:o(()=>[n(i(r.value.email),1)]),_:1})]),_:1}),l(e(d),null,{default:o(()=>[l(e(u),{class:"ion-text-bold"},{default:o(()=>t[15]||(t[15]=[n("Città:")])),_:1}),l(e(c),null,{default:o(()=>[n(i(r.value.citta),1)]),_:1})]),_:1}),l(e(d),null,{default:o(()=>[l(e(u),{class:"ion-text-bold"},{default:o(()=>t[16]||(t[16]=[n("Indirizzo:")])),_:1}),l(e(c),null,{default:o(()=>[n(i(r.value.via)+" "+i(r.value.numeroCivico),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])):P("",!0),C("section",ae,[l(e(I),{color:"danger",onClick:R},{default:o(()=>t[17]||(t[17]=[n("Blocca Cliente")])),_:1})]),C("section",ie,[l(e(I),{color:"danger",expand:"block",onClick:t[1]||(t[1]=p=>T())},{default:o(()=>t[18]||(t[18]=[n("Elimina Prenotazione")])),_:1})])])):P("",!0),l(e(h),{"is-open":f.value,message:"Attendere..."},null,8,["is-open"])]),_:1})]),_:1},8,["is-open"]))}},de=q(se,[["__scopeId","data-v-789667c5"]]);export{de as A};

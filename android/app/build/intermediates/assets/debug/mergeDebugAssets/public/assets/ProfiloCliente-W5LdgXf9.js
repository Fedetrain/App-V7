import{_ as h,g as m,b as u,h as v,s as e,u as o,j as I,p as w,t as a,I as y,v as N,x as n,z as k,A as P,M as l,H as C,am as x,O as z,R as L,an as B,ao as r,f as D,ap as T}from"./index-CQjVl0ED.js";const A={class:"div-button"},M={__name:"ProfiloCliente",setup(O){const c=m(),d=I(),f=u(),p=async()=>{try{await B(f),d.replace("/login")}catch(i){console.error("Errore durante il logout:",i)}},g=async()=>{try{if((await r.requestPermissions()).receive!=="granted"){alert("Le notifiche non sono abilitate. Si prega di attivarle dalle impostazioni."),Capacitor.isNative&&Plugins.Browser.open({url:"app-settings:"});return}await r.register(),r.addListener("pushNotificationReceived",t=>{const s=Math.floor(Date.now()/1e3)+Math.floor(Math.random()*1e3);r.schedule({notifications:[{id:s,title:t.title,body:t.body,schedule:{at:new Date(Date.now()+1e3)},sound:"default"}]})}),r.addListener("pushNotificationActionPerformed",t=>{}),r.addListener("registration",t=>{_(t.value)})}catch(i){alert("Si Ã¨ verificato un errore durante la gestione delle notifiche.")}},_=async i=>{try{const t=u().currentUser;if(!t)return;const s=t.uid,b=D(c,"Gestore",s);await T(b,{notificationToken:i},{merge:!0})}catch(t){console.error("Error updating token: ",t)}};return(i,t)=>(w(),v(o(L),null,{default:e(()=>[a(o(k),null,{default:e(()=>[a(o(y),{color:"primary"},{default:e(()=>[a(o(N),null,{default:e(()=>t[0]||(t[0]=[n("Profilo")])),_:1})]),_:1})]),_:1}),a(o(z),null,{default:e(()=>[P("div",A,[a(o(l),{class:"button","router-link":"/cliente/tabs/tab3/visualizzaProfilo","router-direction":"forward"},{default:e(()=>t[1]||(t[1]=[n(" Visualizza profilo ")])),_:1}),a(o(l),{class:"button-notifiche",onClick:g},{default:e(()=>t[2]||(t[2]=[n(" Attiva notifiche ")])),_:1}),a(o(l),{class:"button-logout",onClick:p},{default:e(()=>[t[3]||(t[3]=n(" Logout ")),a(o(C),{slot:"end",icon:o(x)},null,8,["icon"])]),_:1})])]),_:1})]),_:1}))}},S=h(M,[["__scopeId","data-v-4b166156"]]);export{S as default};
